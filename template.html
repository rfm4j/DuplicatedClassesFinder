<!DOCTYPE html>
<html>
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {font-family: Arial, sans-serif; padding: 20px;}
        .hidden {display: none;}
        .active-btn { background-color: #007bff; color: white;}
        footer { margin-top: 50px; padding: 20px; background-color: #f8f9fa; text-align: center;}
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css">
    <script>
        var data = JSON.parse('{json_data}');

        function generateTable(id) {
            var dataSet, columns;
            if (id === '1') {
                dataSet = data.classes_data.map(function (item) {
                    return [item.class_name, item.jar_files.join('<br>')];
                });
                columns = [
                    { title: "Class Name" },
                    { title: "Files" }
                ];
            } else {
                dataSet = data.files_data.map(function (item) {
                    return [item.file_name, item.classes.join('<br>')];
                });
                columns = [
                    { title: "File Name" },
                    { title: "Duplicated Classes" }
                ];
            }
            $('#resultTable' + id).DataTable({
                data: dataSet,
                columns: columns,
                destroy: true
            });
        }

        function showTable(id) {
            var tableIds = ['1', '2'];
            tableIds.forEach(function (tableId) {
                if (tableId === id) {
                    document.getElementById("resultTable_wrapper" + id).classList.remove("hidden");
                    document.getElementById("btn" + id).classList.add("active-btn");
                } else {
                    document.getElementById("resultTable_wrapper" + tableId).classList.add("hidden");
                    document.getElementById("btn" + tableId).classList.remove("active-btn");
                }
            });
        }

        $(document).ready(function() {
            generateTable('1');
            generateTable('2');
            showTable('1');
        });
    </script>
</head>
<body>
    <h1>Classes present in multiple .jar or .war files</h1>
    <div class="card mb-3">
        <div class="card-body">
            <h5 class="card-title">Script Execution Summary</h5>
            <p class="card-text">Generated on: <strong>{generation_time}</strong></p>
            <p class="card-text">Script execution params: <strong>{execution_params}</strong></p>
            <p class="card-text">Execution time: <strong>{execution_time}</strong> seconds</p>
        </div>
    </div>
    <div>
        <button id="btn1" onclick="showTable('1')" class="btn btn-secondary active-btn">Group by Class</button>
        <button id="btn2" onclick="showTable('2')" class="btn btn-secondary">Group by File</button>
    </div>
    <br>
            <div id="resultTable_wrapper1" class="hidden">
                <table id="resultTable1" class="table table-striped table-bordered" style="width:100%"></table>
            </div>
            <div id="resultTable_wrapper2" class="hidden">
                <table id="resultTable2" class="table table-striped table-bordered" style="width:100%"></table>
            </div>
            <footer>
                <p>&copy; {current_year} Company Name. Report generated by the Jar and War analyzer tool.</p>
            </footer>
    </body>
    </html>
    
